一·、句柄定义

句柄就是个数字，一般和当前系统下的整数的位数一样，比如32bit系统下就是4个字节。
这个数字是一个对象的唯一标示，和对象一一对应。
这个对象可以是一个块内存，一个资源，或者一个服务的context（如 socket，thread）等等。
这个数字的来源可以有很多中，只要能保证和它代表的对象保持唯一对应就可以，比如可以用内存地址，也可以用句柄表的序号，或者干脆用一个自增ID，再或者用以上的值去异或一个常数。

传统上操作系统内核和系统服务API都是 C 语言接口的，但是其内部设计理念上又是OO的，所以有对象概念却没有对应的语言语法支持。
句柄的作用就是在 C 语言环境下代替 C++ 的对象指针来用的。
创建句柄就是构造，销毁句柄就是析构，用句柄调用函数相当于传入this指针。
如果有系统API是 C++ 接口的，那么就没有句柄了，而是某个接口指针，IXXXPtr之类的，比如Windows的com ptr。

二·、句柄与指针的区别

句柄实际上是一种指向某种资源的指针，但与指针又有所不同：指针对应着一个数据在内存中的地址，得到了指针就可以自由地修改该数据。Windows并不希望一般程序修改其内部数据结构，因为这样太不安全。所以Windows给每个使用GlobalAlloc等函数声明的内存区域指定一个句柄(本质上仍是一个指针，但不要直接操作它)，平时你只是在调用API函数时利用这个句柄来说明要操作哪段内存。当你需要对某个内存进行直接操作时，可以使用GlobalLock锁住这段内存并获得指针来直接进行操作。  
“句柄”（handle），handle的本意是把柄，把手的意思。是你与操作系统打交道的东西。举个例子：比如你做了亏心事（我说的是比如，呵呵），不幸让我抓住了把柄，那么我让你做什么你就得做什么，因为你的把柄在我这。我们编程的时候也是这样，比如我们要想操纵一个窗口，那我们就必须“抓住它的把柄”，只有这样，我们才能改变它的属性，改变它的式样，甚至销毁它（狠了点儿）。我们再引用一个通俗一点的例子，比如你考上了大学，入学后，学校（操作系统）会给你一个学生证号。注意，这个号码是学校指定的，你无法自选。有了这个号码（学生证，假设一证多用）就可以享受学校提供的服务：如你就可以去图书馆借书，去食堂吃饭，去教室上课等等。但你不能到食堂里买啤酒，因为学校不允许这种服务。而在计算机中系统提供的服务就是API调用，你有了HANDLE，就可以理直气壮地向系统提出调用API的服务。而指针的权力就大多了，有了指针你可以到处去喝酒，打架，学校（操作系统）管不着，所以句柄和指针的区别在于句柄只能调用系统提供的服务。而句柄虽然是一个能相互区别的号码，但与我们普通的ID号又有区别，普通的ID号是可以由程序员自己定义的，而句柄不行，它是对象生成时系统指定的，是为了区别系统中存在的各个对象，这个句柄不是由程序员赋给的。实际应用中，最常用的就是文件句柄和窗口句柄。例如，窗口句柄的值是一个长整数，每个窗体都用一个句柄来表示。所以句柄是不会重复的，很多的函数都会用到窗体的句柄。
